!function($){$.extend(Craft,{t:function(message,params){if(void 0!==Craft.translations[message]&&(message=Craft.translations[message]),params)for(var key in params)message=message.replace("{"+key+"}",params[key]);return message},getUrl:function(path,params,baseUrl){if("string"!=typeof path&&(path=""),-1!=path.search("://")||"//"==path.substr(0,2))return path;path=Craft.trim(path,"/");var anchor="";if($.isPlainObject(params)){var aParams=[];for(var name in params){var value=params[name];"#"==name?anchor=value:null!==value&&""!==value&&aParams.push(name+"="+value)}params=aParams}params=Garnish.isArray(params)?params.join("&"):Craft.trim(params,"&?");var qpos=path.indexOf("?");-1!=qpos&&(params=path.substr(qpos+1)+(params?"&"+params:""),path=path.substr(0,qpos));var url;if(baseUrl){if(url=baseUrl,path){var pathMatch=url.match(/[&\?]p=[^&]+/);pathMatch&&(url=url.replace(pathMatch[0],pathMatch[0]+"/"+path),path="")}}else url=Craft.baseUrl;var qpos=url.indexOf("?");if("-1"!=qpos&&(params=url.substr(qpos+1)+(params?"&"+params:""),url=url.substr(0,qpos)),!Craft.omitScriptNameInUrls&&path)if(Craft.usePathInfo)-1==url.search(Craft.scriptName)&&(url=Craft.rtrim(url,"/")+"/"+Craft.scriptName);else{if(params&&"p="==params.substr(0,2)){var basePath,endPath=params.indexOf("&");-1!=endPath?(basePath=params.substring(2,endPath),params=params.substr(endPath+1)):(basePath=params.substr(2),params=null),basePath=Craft.rtrim(basePath),path=basePath+(path?"/"+path:"")}params="p="+path+(params?"&"+params:""),path=null}return path&&(url=Craft.rtrim(url,"/")+"/"+path),params&&(url+="?"+params),anchor&&(url+="#"+anchor),url},getActionUrl:function(path,params){return Craft.getUrl(path,params,Craft.actionUrl)},postActionRequest:function(action,data,callback,options){"function"==typeof data&&(options=callback,callback=data,data={}),Craft.csrfTokenValue&&Craft.csrfTokenName&&("string"==typeof data?(data&&(data+="&"),data+=Craft.csrfTokenName+"="+Craft.csrfTokenValue):(data=null===data||"object"!=typeof data?{}:$.extend({},data),data[Craft.csrfTokenName]=Craft.csrfTokenValue));var jqXHR=$.ajax($.extend({url:Craft.getActionUrl(action),type:"POST",data:data,success:callback,error:function(jqXHR,textStatus,errorThrown){callback&&callback(null,textStatus,jqXHR)},complete:function(jqXHR,textStatus){"success"!=textStatus&&(void 0!==Craft.cp?Craft.cp.displayError():alert(Craft.t("An unknown error occurred.")))}},options));return options&&"function"==typeof options.send&&options.send(jqXHR),jqXHR},escapeChars:function(chars){Garnish.isArray(chars)||(chars=chars.split());for(var escaped="",i=0;i<chars.length;i++)escaped+="\\"+chars[i];return escaped},ltrim:function(str,chars){if(!str)return str;void 0===chars&&(chars=" \t\n\r\0\v");var re=new RegExp("^["+Craft.escapeChars(chars)+"]+");return str.replace(re,"")},rtrim:function(str,chars){if(!str)return str;void 0===chars&&(chars=" \t\n\r\0\v");var re=new RegExp("["+Craft.escapeChars(chars)+"]+$");return str.replace(re,"")},trim:function(str,chars){return str=Craft.ltrim(str,chars),str=Craft.rtrim(str,chars)}});var Base=function(){};if(Base.extend=function(_instance,_static){var extend=Base.prototype.extend;Base._prototyping=!0;var proto=new this;extend.call(proto,_instance),proto.base=function(){},delete Base._prototyping;var constructor=proto.constructor,klass=proto.constructor=function(){if(!Base._prototyping)if(this._constructing||this.constructor==klass)this._constructing=!0,constructor.apply(this,arguments),delete this._constructing;else if(null!=arguments[0])return(arguments[0].extend||extend).call(arguments[0],proto)};return klass.ancestor=this,klass.extend=this.extend,klass.forEach=this.forEach,klass.implement=this.implement,klass.prototype=proto,klass.toString=this.toString,klass.valueOf=function(type){return"object"==type?klass:constructor.valueOf()},extend.call(klass,_static),"function"==typeof klass.init&&klass.init(),klass},Base.prototype={extend:function(source,value){if(arguments.length>1){var ancestor=this[source];if(ancestor&&"function"==typeof value&&(!ancestor.valueOf||ancestor.valueOf()!=value.valueOf())&&/\bbase\b/.test(value)){var method=value.valueOf();value=function(){var previous=this.base||Base.prototype.base;this.base=ancestor;var returnValue=method.apply(this,arguments);return this.base=previous,returnValue},value.valueOf=function(type){return"object"==type?value:method},value.toString=Base.toString}this[source]=value}else if(source){var extend=Base.prototype.extend;Base._prototyping||"function"==typeof this||(extend=this.extend||extend);for(var proto={toSource:null},hidden=["constructor","toString","valueOf"],i=Base._prototyping?0:1;key=hidden[i++];)source[key]!=proto[key]&&extend.call(this,key,source[key]);for(var key in source)if(!proto[key]){var desc=Object.getOwnPropertyDescriptor(source,key);void 0!==desc.value?extend.call(this,key,desc.value):Object.defineProperty(this,key,desc)}}return this}},Base=Base.extend({constructor:function(){this.extend(arguments[0])}},{ancestor:Object,version:"1.1",forEach:function(object,block,context){for(var key in object)void 0===this.prototype[key]&&block.call(context,object[key],key,object)},implement:function(){for(var i=0;i<arguments.length;i++)"function"==typeof arguments[i]?arguments[i](this.prototype):this.prototype.extend(arguments[i]);return this},toString:function(){return String(this.valueOf())}}),"undefined"!=typeof Garnish)throw"Garnish is already defined!";Garnish={$win:$(window),$doc:$(document),$bod:$(document.body)},Garnish.rtl=Garnish.$bod.hasClass("rtl"),Garnish.ltr=!Garnish.rtl,Garnish=$.extend(Garnish,{$scrollContainer:Garnish.$win,DELETE_KEY:8,SHIFT_KEY:16,CTRL_KEY:17,ALT_KEY:18,RETURN_KEY:13,ESC_KEY:27,SPACE_KEY:32,LEFT_KEY:37,UP_KEY:38,RIGHT_KEY:39,DOWN_KEY:40,A_KEY:65,S_KEY:83,CMD_KEY:91,PRIMARY_CLICK:1,SECONDARY_CLICK:3,X_AXIS:"x",Y_AXIS:"y",FX_DURATION:100,TEXT_NODE:3,log:function(msg){"undefined"!=typeof console&&"function"==typeof console.log&&console.log(msg)},_isMobileBrowser:null,_isMobileOrTabletBrowser:null,isMobileBrowser:function(detectTablets){var key=detectTablets?"_isMobileOrTabletBrowser":"_isMobileBrowser";if(null===Garnish[key]){var a=navigator.userAgent||navigator.vendor||window.opera;Garnish[key]=new RegExp("(android|bbd+|meego).+mobile|avantgo|bada/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)/|plucker|pocket|psp|series(4|6)0|symbian|treo|up.(browser|link)|vodafone|wap|windows ce|xda|xiino"+(detectTablets?"|android|ipad|playbook|silk":""),"i").test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4))}return Garnish[key]},isArray:function(val){return val instanceof Array},isJquery:function(val){return val instanceof jQuery},isString:function(val){return"string"==typeof val},hasAttr:function(elem,attr){var val=$(elem).attr(attr);return void 0!==val&&!1!==val},isTextNode:function(elem){return elem.nodeType==Garnish.TEXT_NODE},getOffset:function(elem){return this.getOffset._offset=$(elem).offset(),Garnish.$scrollContainer[0]!=Garnish.$win[0]&&(this.getOffset._offset.top+=Garnish.$scrollContainer.scrollTop(),this.getOffset._offset.left+=Garnish.$scrollContainer.scrollLeft()),this.getOffset._offset},getDist:function(x1,y1,x2,y2){return Math.sqrt(Math.pow(x1-x2,2)+Math.pow(y1-y2,2))},hitTest:function(x,y,elem){return Garnish.hitTest._$elem=$(elem),Garnish.hitTest._offset=Garnish.hitTest._$elem.offset(),Garnish.hitTest._x1=Garnish.hitTest._offset.left,Garnish.hitTest._y1=Garnish.hitTest._offset.top,Garnish.hitTest._x2=Garnish.hitTest._x1+Garnish.hitTest._$elem.outerWidth(),Garnish.hitTest._y2=Garnish.hitTest._y1+Garnish.hitTest._$elem.outerHeight(),x>=Garnish.hitTest._x1&&x<Garnish.hitTest._x2&&y>=Garnish.hitTest._y1&&y<Garnish.hitTest._y2},isCursorOver:function(ev,elem){return Garnish.hitTest(ev.pageX,ev.pageY,elem)},copyTextStyles:function(source,target){var $source=$(source);$(target).css({fontFamily:$source.css("fontFamily"),fontSize:$source.css("fontSize"),fontWeight:$source.css("fontWeight"),letterSpacing:$source.css("letterSpacing"),lineHeight:$source.css("lineHeight"),textAlign:$source.css("textAlign"),textIndent:$source.css("textIndent"),whiteSpace:$source.css("whiteSpace"),wordSpacing:$source.css("wordSpacing"),wordWrap:$source.css("wordWrap")})},getBodyScrollTop:function(){return Garnish.getBodyScrollTop._scrollTop=document.body.scrollTop,Garnish.getBodyScrollTop._scrollTop<0?Garnish.getBodyScrollTop._scrollTop=0:(Garnish.getBodyScrollTop._maxScrollTop=Garnish.$bod.outerHeight()-Garnish.$win.height(),Garnish.getBodyScrollTop._scrollTop>Garnish.getBodyScrollTop._maxScrollTop&&(Garnish.getBodyScrollTop._scrollTop=Garnish.getBodyScrollTop._maxScrollTop)),Garnish.getBodyScrollTop._scrollTop},requestAnimationFrame:function(){var raf=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(fn){return window.setTimeout(fn,20)};return function(fn){return raf(fn)}}(),cancelAnimationFrame:function(){var cancel=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.clearTimeout;return function(id){return cancel(id)}}(),scrollContainerToElement:function(container,elem){if(void 0===elem){var $elem=$(container);$container=$elem.scrollParent()}else var $container=$(container),$elem=$(elem);"HTML"!==$container.prop("nodeName")&&$container[0]!=Garnish.$doc[0]||($container=Garnish.$win);var scrollTop=$container.scrollTop(),elemOffset=$elem.offset().top;if($container[0]==window)var elemScrollOffset=elemOffset-scrollTop;else var elemScrollOffset=elemOffset-$container.offset().top;var targetScrollTop=!1;if(elemScrollOffset<0)targetScrollTop=scrollTop+elemScrollOffset-10;else{var elemHeight=$elem.outerHeight(),containerHeight=$container[0]==window?window.innerHeight:$container[0].clientHeight;elemScrollOffset+elemHeight>containerHeight&&(targetScrollTop=scrollTop+(elemScrollOffset-(containerHeight-elemHeight))+10)}!1!==targetScrollTop&&($container[0]==window?$("html").velocity("scroll",{offset:targetScrollTop+"px",mobileHA:!1}):$container.scrollTop(targetScrollTop))},SHAKE_STEPS:10,SHAKE_STEP_DURATION:25,shake:function(elem,prop){var $elem=$(elem);prop||(prop="margin-left");var startingPoint=parseInt($elem.css(prop));isNaN(startingPoint)&&(startingPoint=0);for(var i=0;i<=Garnish.SHAKE_STEPS;i++)!function(i){setTimeout(function(){Garnish.shake._properties={},Garnish.shake._properties[prop]=startingPoint+(i%2?-1:1)*(10-i),$elem.velocity(Garnish.shake._properties,Garnish.SHAKE_STEP_DURATION)},Garnish.SHAKE_STEP_DURATION*i)}(i)},getElement:function(elem){return $.makeArray(elem)[0]},getInputBasename:function(elem){var name=$(elem).attr("name");return name?name.replace(/\[.*/,""):null},getInputPostVal:function($input){var type=$input.attr("type"),val=$input.val();return"checkbox"==type||"radio"==type?$input.prop("checked")?val:null:Garnish.isArray(val)&&"[]"!=$input.attr("name").substr(-2)?val.length?val[val.length-1]:null:val},findInputs:function(container){return $(container).find("input,text,textarea,select,button")},getPostData:function(container){for(var postData={},arrayInputCounters={},$inputs=Garnish.findInputs(container),i=0;i<$inputs.length;i++){var $input=$inputs.eq(i);if(!$input.prop("disabled")){var inputName=$input.attr("name");if(inputName){var inputVal=Garnish.getInputPostVal($input);if(null!==inputVal){var isArrayInput="[]"==inputName.substr(-2);if(isArrayInput){var croppedName=inputName.substring(0,inputName.length-2);void 0===arrayInputCounters[croppedName]&&(arrayInputCounters[croppedName]=0)}Garnish.isArray(inputVal)||(inputVal=[inputVal]);for(var j=0;j<inputVal.length;j++){if(isArrayInput){var inputName=croppedName+"["+arrayInputCounters[croppedName]+"]";arrayInputCounters[croppedName]++}postData[inputName]=inputVal[j]}}}}}return postData},copyInputValues:function(source,target){for(var $sourceInputs=Garnish.findInputs(source),$targetInputs=Garnish.findInputs(target),i=0;i<$sourceInputs.length&&void 0!==$targetInputs[i];i++)$targetInputs.eq(i).val($sourceInputs.eq(i).val())},isCtrlKeyPressed:function(ev){return window.navigator.platform.match(/Mac/)?ev.metaKey:ev.ctrlKey&&!ev.altKey}}),Garnish.Base=Base.extend({settings:null,_eventHandlers:null,_namespace:null,_$listeners:null,_disabled:!1,constructor:function(){this._eventHandlers=[],this._namespace=".Garnish"+Math.floor(1e9*Math.random()),this._listeners=[],this.init.apply(this,arguments)},init:$.noop,setSettings:function(settings,defaults){var baseSettings=void 0===this.settings?{}:this.settings;this.settings=$.extend({},baseSettings,defaults,settings)},on:function(events,data,handler){"function"==typeof data&&(handler=data,data={});for(var events=this._normalizeEvents(events),i=0;i<events.length;i++){var ev=events[i];this._eventHandlers.push({type:ev[0],namespace:ev[1],data:data,handler:handler})}},off:function(events,handler){for(var events=this._normalizeEvents(events),i=0;i<events.length;i++)for(var ev=events[i],j=this._eventHandlers.length-1;j>=0;j--){var eventHandler=this._eventHandlers[j];eventHandler.type!=ev[0]||ev[1]&&eventHandler.namespace!=ev[1]||eventHandler.handler!==handler||this._eventHandlers.splice(j,1)}},trigger:function(type,data){for(var ev={type:type,target:this},i=0;i<this._eventHandlers.length;i++){var handler=this._eventHandlers[i];if(handler.type==type){var _ev=$.extend({data:handler.data},data,ev);handler.handler(_ev)}}},_normalizeEvents:function(events){"string"==typeof events&&(events=events.split(" "));for(var i=0;i<events.length;i++)"string"==typeof events[i]&&(events[i]=events[i].split("."));return events},_splitEvents:function(events){if("string"==typeof events){events=events.split(",");for(var i=0;i<events.length;i++)events[i]=$.trim(events[i])}return events},_formatEvents:function(events){for(var events=this._splitEvents(events).slice(0),i=0;i<events.length;i++)events[i]+=this._namespace;return events.join(" ")},addListener:function(elem,events,data,func){var $elem=$(elem);$elem.length&&(events=this._splitEvents(events),void 0===func&&"object"!=typeof data&&(func=data,data={}),func="function"==typeof func?$.proxy(func,this):$.proxy(this,func),$elem.on(this._formatEvents(events),data,$.proxy(function(){this._disabled||func.apply(this,arguments)},this)),-1==$.inArray(elem,this._listeners)&&this._listeners.push(elem))},removeListener:function(elem,events){$(elem).off(this._formatEvents(events))},removeAllListeners:function(elem){$(elem).off(this._namespace)},disable:function(){this._disabled=!0},enable:function(){this._disabled=!1},destroy:function(){this.trigger("destroy"),this.removeAllListeners(this._listeners)}}),$.extend(jQuery.event.special,{activate:{setup:function(data,namespaces,eventHandle){var $elem=(this._namespace,$(this));$elem.on({"mousedown.garnish-activate":function(e){e.preventDefault()},"click.garnish-activate":function(e){e.preventDefault(),$elem.hasClass("disabled")||$elem.trigger("activate")},"keydown.garnish-activate":function(e){this==$elem[0]&&e.keyCode==Garnish.SPACE_KEY&&(e.preventDefault(),$elem.hasClass("disabled")||($elem.addClass("active"),Garnish.$doc.on("keyup.garnish-activate",function(e){$elem.removeClass("active"),e.keyCode==Garnish.SPACE_KEY&&(e.preventDefault(),$elem.trigger("activate")),Garnish.$doc.off("keyup.garnish-activate")})))}}),$elem.hasClass("disabled")?$elem.removeAttr("tabindex"):$elem.attr("tabindex","0")},teardown:function(){$(this).off(".garnish-activate")}},textchange:{setup:function(data,namespaces,eventHandle){var $elem=$(this);$elem.data("garnish-textchange-value",$elem.val()),$elem.on("keypress.garnish-textchange keyup.garnish-textchange change.garnish-textchange blur.garnish-textchange",function(e){var val=$elem.val();val!=$elem.data("garnish-textchange-value")&&($elem.data("garnish-textchange-value",val),$elem.trigger("textchange"))})},teardown:function(){$(this).off(".garnish-textchange")},handle:function(ev,data){var el=this,args=arguments,delay=data&&void 0!==data.delay?data.delay:ev.data&&void 0!==ev.data.delay?ev.data.delay:null,handleObj=ev.handleObj,targetData=$.data(ev.target);if(!delay)return handleObj.handler.apply(el,args);targetData.delayTimeout&&clearTimeout(targetData.delayTimeout),targetData.delayTimeout=setTimeout(function(){handleObj.handler.apply(el,args)},delay)}},resize:{setup:function(data,namespaces,eventHandle){if(this==window)return!1;$("> :last-child",this).addClass("last")},teardown:function(){if(this==window)return!1}}}),jQuery.each(["activate","textchange","resize"],function(i,name){jQuery.fn[name]=function(data,fn){return arguments.length>0?this.on(name,null,data,fn):this.trigger(name)}})}(jQuery);